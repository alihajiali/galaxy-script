# پشتیبان‌گیری به S3

اسکریپتی مبتنی بر پایتون برای پشتیبان‌گیری دوره‌ای از داده‌های API فینگ به یک سرویس ذخیره‌سازی سازگار با S3. این پروژه از `aiohttp` برای ارسال درخواست‌های HTTP به صورت غیرهمزمان و از `aiobotocore` برای تعامل با ذخیره‌سازی S3 استفاده می‌کند.

## ویژگی‌ها

- دریافت آخرین نسخه پشتیبان از API فینگ.
- دانلود فایل پشتیبان.
- آپلود فایل پشتیبان به یک باکت S3.
- اجرا به صورت مداوم و دریافت نسخه‌های جدید پشتیبان هر ساعت.

## پیش‌نیازها

- پایتون نسخه 3.13 یا بالاتر.
- یک سرویس ذخیره‌سازی سازگار با S3 (مانند AWS S3 یا MinIO).
- اطلاعات ورود به API فینگ (ایمیل و رمز عبور).

## نصب

1. این مخزن را کلون کنید:
   ```bash
   git clone <repository-url>
   cd <repository-folder>
   ```

2. تصویر داکر را بسازید:
   ```bash
   docker build -t backup-to-s3 .
   ```

3. کانتینر را اجرا کنید:
   ```bash
   docker run -d -e ACCESS_KEY=<your-access-key> \
              -e SECRET_KEY=<your-secret-key> \
              -e ENDPOINT_URL=<s3-endpoint-url> \
              -e BUCKET_NAME=<bucket-name> \
              -e SERVICE_NAME=<service-name> \
              -e FING_EMAIL=<email> \
              -e FING_PASSWORD=<password> \
              --name backup-to-s3 --restart always \
              -t backup-to-s3
   ```

## متغیرهای محیطی

- `ACCESS_KEY`: کلید دسترسی S3 شما.
- `SECRET_KEY`: کلید محرمانه S3 شما.
- `ENDPOINT_URL`: آدرس سرویس سازگار با S3.
- `BUCKET_NAME`: نام باکتی که فایل‌های پشتیبان در آن ذخیره می‌شوند.
- `SERVICE_NAME`: نام سرویس فینگ که پشتیبان‌های آن دریافت می‌شود.
- `FING_EMAIL`: آدرس ایمیل برای API فینگ.
- `FING_PASSWORD`: رمز عبور برای API فینگ.

## ساختار پروژه

```
.
├── main.py         # اسکریپت اصلی برای انجام فرآیند پشتیبان‌گیری.
├── Dockerfile      # فایل داکر برای کانتینری کردن برنامه.
├── README.md       # مستندات پروژه (این فایل).
```

## نحوه کار

1. وارد API فینگ می‌شود تا توکن دسترسی دریافت کند.
2. اطلاعات آخرین نسخه پشتیبان را برای سرویس مشخص‌شده دریافت می‌کند.
3. فایل پشتیبان را با استفاده از لینک دانلود ارائه‌شده، دانلود می‌کند.
4. فایل پشتیبان را به باکت S3 تنظیم‌شده آپلود می‌کند.
5. این فرآیند هر ساعت تکرار می‌شود.

## نیازمندی‌ها

این اسکریپت از وابستگی‌های زیر استفاده می‌کند:

- `aiohttp`: برای ارسال درخواست‌های HTTP به صورت غیرهمزمان.
- `aiobotocore`: برای تعامل با S3 به صورت غیرهمزمان.

این وابستگی‌ها در فایل `Dockerfile` لیست شده‌اند و در طی فرآیند ساخت نصب خواهند شد.

## نکات

- مطمئن شوید که باکت S3 قبل از اجرای اسکریپت ایجاد شده است.
- اطمینان حاصل کنید که اطلاعات ورود API فینگ و کلیدهای S3 معتبر هستند و دسترسی‌های لازم را دارند.

## مجوز

این پروژه تحت مجوز MIT منتشر شده است. برای جزئیات بیشتر به فایل LICENSE مراجعه کنید.

## مشارکت‌ها

مشارکت‌ها استقبال می‌شود! برای بهبود پروژه می‌توانید مشکلات یا درخواست‌های تغییر را ارسال کنید.

