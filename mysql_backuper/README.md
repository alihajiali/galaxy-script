# اسکریپت بکاپ‌گیری از پایگاه داده MySQL

این اسکریپت پایتون به صورت دوره‌ای از تمامی پایگاه داده‌های MySQL (به جز پایگاه داده‌های سیستمی) بکاپ می‌گیرد و آن‌ها را به فایل‌های `.sql` ذخیره می‌کند. هر بکاپ در یک پوشه با نام زمان‌بندی‌شده در دایرکتوری `./mysql` ذخیره می‌شود.

## ویژگی‌ها

- بکاپ‌گیری خودکار از تمامی پایگاه داده‌های کاربر هر یک ساعت یک بار.
- حذف پایگاه داده‌های سیستمی نظیر `information_schema`، `mysql`، `performance_schema` و `sys`.
- ذخیره هر پایگاه داده به صورت جداگانه در یک فایل `.sql` در دایرکتوری با نام زمان‌بندی‌شده.
- ارائه بازخورد آنی از موفقیت یا شکست عملیات بکاپ‌گیری با استفاده از رنگ‌بندی در ترمینال.

## پیش‌نیازها

1. **محیط پایتون**:
   - پایتون نسخه 3.6 یا بالاتر
   - کتابخانه‌های مورد نیاز:
     - `subprocess` (داخلی)
     - `datetime` (داخلی)
     - `os` (داخلی)
     - `termcolor` (نصب از طریق `pip install termcolor`)
     - `time` (داخلی)

2. **ابزارهای کلاینت MySQL**:
   - ابزارهای خط فرمان `mysql` و `mysqldump` باید نصب شده و در مسیر سیستم (`PATH`) قابل دسترس باشند.
     ‍‍‍```bash
     sudo apt install mysql-client
     ```

3. **دسترسی‌های MySQL**:
   - کاربر MySQL باید دسترسی‌های کافی برای مشاهده و بکاپ‌گیری از تمامی پایگاه داده‌های مورد نظر را داشته باشد.

## نصب

1. اسکریپت را دانلود یا کلون کنید.

2. وابستگی‌های لازم را نصب کنید:

   ```bash
   pip install termcolor
   ```

3. از نصب ابزارهای MySQL اطمینان حاصل کنید:

   ```bash
   mysql --version
   mysqldump --version
   ```

## استفاده

1. متغیرهای محیطی زیر را برای اتصال به پایگاه داده MySQL تنظیم کنید:

   | متغیر      | توضیحات                                         |
   | ---------- | ----------------------------------------------- |
   | `HOST`     | آدرس سرور MySQL (مثل `localhost` یا یک آدرس IP) |
   | `PORT`     | پورت سرور MySQL (پیش‌فرض: `3306`)                |
   | `USER`     | نام کاربری MySQL                                |
   | `PASSWORD` | رمز عبور MySQL                                  |

   می‌توانید این متغیرها را به صورت زیر تنظیم کنید:

   در سیستم‌عامل‌های یونیکس:

   ```bash
   export HOST=localhost
   export PORT=3306
   export USER=root
   export PASSWORD=yourpassword
   ```

   در ویندوز (خط فرمان):

   ```cmd
   set HOST=localhost
   set PORT=3306
   set USER=root
   set PASSWORD=yourpassword
   ```

2. اسکریپت را اجرا کنید:

   ```bash
   python script_name.py
   ```

## نکات

- بکاپ‌ها در پوشه `./mysql` ذخیره می‌شوند. نام پوشه‌ها شامل تاریخ و زمان اجرای اسکریپت است.
- پایگاه داده‌های سیستمی به طور خودکار نادیده گرفته می‌شوند.
- هر یک ساعت یک بار، فرآیند بکاپ‌گیری تکرار می‌شود.

## رفع اشکال

اگر با مشکلی مواجه شدید:

1. مطمئن شوید که ابزارهای `mysql` و `mysqldump` نصب شده‌اند.
2. از صحت اطلاعات اتصال (نام کاربری، رمز عبور، آدرس سرور) اطمینان حاصل کنید.
3. خطاهای نمایش داده شده در ترمینال را بررسی کنید و اقدام مناسب انجام دهید.
